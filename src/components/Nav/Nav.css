@layer base {
	:root {
		--nav-toggle-content-offset: calc(var(--button-height) + var(--space-s));
		--sidebar-width: calc(var(--space-2xl-rem) + var(--space-s));
		--sidebar-submenu-width: calc(var(--space-5xl-rem) + var(--space-s));
	}

	.main-region {
		grid-template-columns: minmax(var(--sidebar-content-offset), 1fr) minmax(auto, var(--main-region-limit)) 1fr;
		margin-block-start: var(--nav-toggle-content-offset);
	}

	@screen md {
		:root {
			--sidebar-content-offset: var(--sidebar-width);
		}

		.main-region {
			margin-block-start: 0;
			padding-inline-start: 0;
		}
	}

	@screen 2xl {
		.submenu-expanded {
			--sidebar-content-offset: calc(var(--sidebar-width) + var(--sidebar-submenu-width) + var(--space-2xs));
		}
	}
}

@layer components {

	.nav-item__link,
	.nav-submenu-item__link {
		border: 2px solid transparent;
		border-radius: var(--border-radius);
		cursor: pointer;
	}

	.nav-item__link {
		align-items: center;
		display: flex;
		gap: var(--space-xs);
		inline-size: 100%;
		padding-block: var(--space-2xs);
		padding-inline: var(--space-3xs) var(--space-xs);
	}

	.nav-item__link:hover,
	.nav-submenu-item__link:hover {
		background-color: var(--color-shade-weak);
	}

	.nav-item__link:active,
	.nav-submenu-item__link:active {
		background-color: var(--color-shade);
	}

	.nav-item__link:focus,
	.nav-submenu-item__link:focus {
		@apply focus-ring;
	}

	.primary-nav [aria-current="page"] {
		color: var(--color-text-strong);
		background-color: var(--color-accent-surface);
		font-weight: 700;
	}

	.nav-item__icon-container {
		display: inline-block;
	}

	.nav-item__icon-container svg {
		height: var(--space-l);
		width: var(--space-l);
		vertical-align: middle;
	}

	.nav-submenu {
		display: none;
		font-size: var(--text-0);
		padding-inline-start: calc(var(--space-l) + var(--space-3xs));
	}

	.nav-item__link.expanded + .nav-submenu,
	.nav-item__link.expanded + * .nav-submenu {
		display: block;
	}

	.nav-submenu-item__link {
		display: block;
		padding-block: var(--space-2xs);
		padding-inline: var(--space-xs);
	}

	@screen md {
		.nav-item {
			font-size: var(--text--1);
			line-height: 1.25;
			text-align: center;
		}

		.nav-item__link {
			border: none;
			margin: auto;
			padding-inline: 0;
		}

		.nav-item__link:focus {
			outline: none;
		}

		.nav-item__link[aria-current] {
			background: transparent;
		}

		.nav-item__link,
		.nav-item__icon-container {
			align-items: center;
			display: flex;
			flex-flow: column nowrap;
			justify-content: center;
			gap: 2px;
		}

		.nav-item__icon-container {
			border: 2px solid transparent;
			border-radius: var(--border-radius);
			inline-size: calc(100% - var(--space-s));
		}

		.nav-item__link:hover .nav-item__icon-container {
			background-color: var(--color-shade-weak);
		}

		.nav-item__link:active .nav-item__icon-container {
			background-color: var(--color-shade);
		}

		.nav-item__link[aria-current="page"] .nav-item__icon-container {
			background-color: var(--color-accent-surface);
		}

		.nav-item__link:focus .nav-item__icon-container {
			@apply focus-ring;
		}

		.nav-item__link > span {
			margin-block-end: var(--space-3xs);
		}

		.nav-submenu {
			@apply shadow-2xl;
			background-color: var(--color-surface-2);
			height: 100vh;
			height: 100lvh;
			flex-flow: column nowrap;
			font-size: 1rem;
			inset-inline-start: 0;
			inline-size: calc(var(--sidebar-submenu-width) + var(--sidebar-width));
			margin-block-start: 0;
			overflow-y: auto;
			overscroll-behavior: none;
			padding-block: var(--space-xs) 0;
			padding-inline: var(--sidebar-width) var(--space-s);
			position: fixed;
			text-align: start;
			top: 0;
			z-index: -1;
		}

		.nav-item__link.expanded + .nav-submenu,
		.nav-item__link.expanded + * .nav-submenu {
			display: none;
		}

		.nav-item__link.expanded.interacted + .nav-submenu,
		.nav-item__link.expanded.interacted + * .nav-submenu {
			display: block;
		}

		.nav-submenu-item__link {
			padding-block: calc((var(--space-2xs) + var(--space-xs)) / 2);
		}

		@screen 2xl {
			.nav-submenu {
				box-shadow: none;
				padding-inline-end: var(--space-2xs);
			}

			.nav-item__link.expanded + .nav-submenu,
			.nav-item__link.expanded + * .nav-submenu {
				display: block;
			}
		}
	}
}